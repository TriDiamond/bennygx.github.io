{"title":"修复 Ionic 3.0.1 在IOS点击Tabs多次出现黑屏问题方法","uid":"aa3962a24afd553a340b25c1704d59c4","slug":"ionic/ios-blackscreen-fix","date":"2017-04-11T00:00:00.000Z","updated":"2021-03-29T15:37:21.167Z","comments":true,"path":"api/articles/ionic/ios-blackscreen-fix.json","excerpt":"","keywords":null,"cover":"https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png","content":"<blockquote>\n<p>Ionic 3.0.1 在IOS存在的一个严重的BUG，在IOS下多次重复点击TAB的时候页面会出现黑屏问题。</p>\n</blockquote>\n<blockquote>\n<p>好消息是目前有一个暂时的修复方法。但是这个方法涉及修改Ionic核心代码，所以如果你们正在使用Ionic3发布APP，可以暂时使用以下办法修复问题。</p>\n</blockquote>\n<blockquote>\n<p>在<code>node_modules/ionic-angular/components/tabs/tabs.js</code>找到一下代码 (468行)</p>\n</blockquote>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\"><span class=\"token function\">getComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_linker<span class=\"token punctuation\">,</span> tab<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>viewController<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>viewController <span class=\"token operator\">!==</span> active<span class=\"token punctuation\">.</span>component<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Otherwise, if the page we're on is not our real root</span>\n        <span class=\"token comment\">// reset it to our default root type</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">return</span></span> tab<span class=\"token punctuation\">.</span><span class=\"token function\">setRoot</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">/* console.debug */</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote>\n<p>把以上代码改为</p>\n</blockquote>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\"><span class=\"token function\">getComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_linker<span class=\"token punctuation\">,</span> tab<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>viewController<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>viewController<span class=\"token punctuation\">.</span>component <span class=\"token operator\">!==</span> active<span class=\"token punctuation\">.</span>component<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Otherwise, if the page we're on is not our real root</span>\n        <span class=\"token comment\">// reset it to our default root type</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">return</span></span> tab<span class=\"token punctuation\">.</span><span class=\"token function\">setRoot</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">/* console.debug */</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote>\n<p>以上解决办法来自于github上面的一个大神 <a href=\"https://github.com/driftyco/ionic/pull/11084\">https://github.com/driftyco/ionic/pull/11084</a></p>\n</blockquote>\n","feature":null,"text":" Ionic 3.0.1 在IOS存在的一个严重的BUG，在IOS下多次重复点击TAB的时候页面会出现黑屏问题。 好消息是目前有一个暂时的修复方法。但是这个方法涉及修改Ionic核心代码，所以如果你们正在使用Ionic3发布APP，可以暂时使用以下办法修复问题。 在node_mo...","link":"","raw":"---\ntitle: \"修复 Ionic 3.0.1 在IOS点击Tabs多次出现黑屏问题方法\"\nabstract: Ionic 3.0.1 在IOS存在的一个严重的BUG，在IOS下多次重复点击TAB的时候页面会出现黑屏问题。\ndate: 2017/04/11\ncategories:\n  - Ionic\ntags:\n  - Ionic 3\n  - Angular 4\n  - Hybird App\ncover: https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png\n---\n\n> Ionic 3.0.1 在IOS存在的一个严重的BUG，在IOS下多次重复点击TAB的时候页面会出现黑屏问题。\n\n> 好消息是目前有一个暂时的修复方法。但是这个方法涉及修改Ionic核心代码，所以如果你们正在使用Ionic3发布APP，可以暂时使用以下办法修复问题。\n\n> 在```node_modules/ionic-angular/components/tabs/tabs.js```找到一下代码 (468行)\n\n```typescript\ngetComponent(this._linker, tab.root).then(function (viewController) {\n    if (viewController !== active.component) {\n        // Otherwise, if the page we're on is not our real root\n        // reset it to our default root type\n        return tab.setRoot(tab.root);\n    }\n}).catch(function () {\n    (void 0) /* console.debug */;\n});\n```\n\n> 把以上代码改为\n\n```typescript\ngetComponent(this._linker, tab.root).then(function (viewController) {\n    if (viewController.component !== active.component) {\n        // Otherwise, if the page we're on is not our real root\n        // reset it to our default root type\n        return tab.setRoot(tab.root);\n    }\n}).catch(function () {\n    (void 0) /* console.debug */;\n});\n```\n\n> 以上解决办法来自于github上面的一个大神 https://github.com/driftyco/ionic/pull/11084\n\n\n\n","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"Ionic","slug":"Ionic","count":6,"path":"api/categories/Ionic.json"}],"tags":[{"name":"Hybird App","slug":"Hybird-App","count":6,"path":"api/tags/Hybird-App.json"},{"name":"Ionic 3","slug":"Ionic-3","count":3,"path":"api/tags/Ionic-3.json"},{"name":"Angular 4","slug":"Angular-4","count":4,"path":"api/tags/Angular-4.json"}],"toc":"","author":{"name":"三钻","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":""},"mapped":true,"prev_post":{"title":"IONIC 3 使用sliders轮播时拖动后autoplay失效解决方法","uid":"7f44014a2f442fb3c9579c3e2714cbfd","slug":"ionic/sliders-autoplay","date":"2017-04-20T00:00:00.000Z","updated":"2021-03-29T15:37:21.171Z","comments":true,"path":"api/articles/ionic/sliders-autoplay.json","keywords":null,"cover":"https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png","text":"我们先了解一下Ionic的Sliders 首先Ionic里面的sliders是用Swiper.js的第三方插件实现的, Ionic官方Sliders的文档里面只描述了可以直接写入html标签内的属性, 有很多高级属性是没有写在文档里面的. 要怎么改变sliders的其他属性呢? ...","link":"","photos":[],"count_time":{"symbolsCount":779,"symbolsTime":"1 mins."},"categories":[{"name":"Ionic","slug":"Ionic","count":6,"path":"api/categories/Ionic.json"}],"tags":[{"name":"Hybird App","slug":"Hybird-App","count":6,"path":"api/tags/Hybird-App.json"},{"name":"Ionic 3","slug":"Ionic-3","count":3,"path":"api/tags/Ionic-3.json"},{"name":"Angular 4","slug":"Angular-4","count":4,"path":"api/tags/Angular-4.json"}],"author":{"name":"三钻","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":""}},"next_post":{"title":"IONIC 2 升级 3 教程","uid":"4e215602f6b85cde51a96fad4b3567e1","slug":"ionic/upgrade-guide","date":"2017-04-10T00:00:00.000Z","updated":"2021-03-29T15:37:21.171Z","comments":true,"path":"api/articles/ionic/upgrade-guide.json","keywords":null,"cover":"https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png","text":"升级步骤 这一次的升级Ionic 3 换成了使用最新的Angular 4.0, 最新的TypeScript, 添加了懒加载和修复了一些组件的bug. 首先更新package.json, 按照以下的代码相应替换你package.json里面的代码, 并且把你项目根目录下的node_...","link":"","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[{"name":"Ionic","slug":"Ionic","count":6,"path":"api/categories/Ionic.json"}],"tags":[{"name":"Hybird App","slug":"Hybird-App","count":6,"path":"api/tags/Hybird-App.json"},{"name":"Ionic 3","slug":"Ionic-3","count":3,"path":"api/tags/Ionic-3.json"},{"name":"Angular 4","slug":"Angular-4","count":4,"path":"api/tags/Angular-4.json"}],"author":{"name":"三钻","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":""}}}